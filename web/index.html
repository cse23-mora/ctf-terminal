<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sangeeth's Secure Terminal</title>
    <style>
        body { background: #0c0c0c; color: #00ff41; font-family: 'Courier New', monospace; padding: 20px; }
        #output { white-space: pre-wrap; margin-bottom: 10px; }
        #input-line { display: flex; }
        #prompt { color: #ff0055; margin-right: 10px; }
        input { background: transparent; border: none; color: #00ff41; outline: none; flex: 1; font-family: inherit; font-size: inherit; }
    </style>
</head>
<body>

    <div id="output">Welcome to Sangeeth-OS v1.0.0. Type 'help' to start.</div>
    <div id="input-line">
        <span id="prompt">sangeeth@portfolio:~$</span>
        <input type="text" id="cmd" autofocus>
    </div>

    <script type="module">
        import init, { run_command } from "../secure_terminal/pkg/secure_terminal.js";

        async function start() {
            await init(); // Initialize the WASM module
            
            const input = document.getElementById("cmd");
            const output = document.getElementById("output");

            input.addEventListener("keydown", (e) => {
                if (e.key === "Enter") {
                    const val = input.value;
                    const result = run_command(val);

                    if (result === "CLEARED") {
                        output.innerHTML = "";
                    } else {
                        output.innerHTML += `\n<span style="color:#ff0055">sangeeth@portfolio:~$</span> ${val}\n${result}\n`;
                    }
                    
                    input.value = "";
                    window.scrollTo(0, document.body.scrollHeight);
                }
            });
        }
        start();
    </script>
</body>
</html>